% extends "base.html"
% block content

  <section class="intro">
    <h1>Find out who patrols your neighborhood.</h1>
    <p>This application helps Chattanoogans find which CPD zone they live in. Type in your address to get started.</p>
  </section>

  <form action="" method="post" name="query">
    {{ form.hidden_tag() }}
    {{ form.query(placeholder="Enter your address") }}
    % for error in form.query.errors
      <span>{{ error }}</span>
    % endfor
    <input type="submit" value="Locate">
  </form>


  % if zone_info
    <div class="zone-results">
      % for z in zone_info
        <section class="card">
          <ul>
            <li>{{ z.officer.name }}</li>
            <li>{{ z.officer.phone }}</li>
            <li><a href="mailto:{{ z.officer.email }}">{{ z.officer.email }}</a></li>
          </ul>
        </section>
      % endfor
    </div>
  % endif

  <div id="map"></div>
% endblock

% block js
  % if cordinates
    <script>
      var lat = {{ cordinates['lat'] }};
      var lon = {{ cordinates['lng'] }};
      var markerIcon = L.icon({
          iconUrl: "{{ url_for('static', filename = 'images/marker.png') }}",
          iconSize:     [60, 60], // size of the icon
      });

      L.marker([lat, lon], {icon: markerIcon}).addTo(map);
    </script>
  % endif
% endblock
